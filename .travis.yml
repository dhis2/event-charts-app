language: node_js
node_js:
- '8'
before_script:
- npm install --global @dhis2/deploy-build
script:
- npm run build
deploy:
- provider: script
  script: deploy-build
  skip_cleanup: true
  on:
    all_branches: true
- provider: script
  script: publish-build
  skip_cleanup: true
  on:
    tags: true
cache:
  yarn: true
  directories:
  - node_modules
env:
  global:
    secure: VIhKQbEhZQmmHQYEcx2g9F+cJO0nwCrpEX4KoryS8kSRn+diSFzACrJpcTLXV8QnjUvrkxIOWXhGLFzmUvt0owxt6f8XSBL7gPAb2PdymJR1gupM/8Lb9SKuy6658og0qo2n1EXkjpWuvFHzTNhfCsalAqLlvqHuzt/GUDvLTg4S/SSizWhSei+BhVVPIYIjxeWvc1fig1QQeCCVC/zJBB3SPQ5gIMWtpRv/C9R73oly80LO2bSagj3C7QdYILNR3/XkkH283+SDmtJX8HsjUNWHS6TZXj9Gfq3lcFsq1bpxiTP+WcaBhhpmbAI4mdQY0LPtcuDId+N81Qo0gdwjKaW/FdmGyuEWYwTJ1TPxQU2aVtfRDZ2Xe9Gl9if2ISjuedYG5/lggf3O3GskB4kNibILU7/QhDcRqFWoryImUMnV+ojEGGqohdvIpunj1FCraYPJj5sXcX7rO0uZsc4Mxnx8BzClvSctOcest/3P0z/elJ+qCjYyyjKlJbPpi4dZrIf5WQOBE8rKycHQgeaRr8lTPCDEycKuefRzNIPhuQYtYbcQYfyVVFBqoIlrzNkVVy/idKsA/yCBb7T7hn5WQggyk6q7gKDVTz8Lxmsb2Tl/iI3qTsTNm1sQn690R8XUFu8NHCt/BCGVdglZKePFccaokQMsrnQcyvpHD9PcDig=
notifications:
  slack:
    secure: eLSjfRc1IGE/AB5+jCZ8d6K+RjoXG/+qf8uc3Nj0/eNSpz6gufB8Lg1CGueNCriiB9E7UZWkQPPTd4xLV5oqshpiIvaJ2zYiCx0JzYGt+mTcCgNBe7Qzu5zfN/SMM/+/FsH5DPp/tT/qab8s/HvGhchELJ7Xuhruf3RDtGEjgI7BcpFgSey9X86K+UrDFrrpl1d7iU9Y2SWNWfHYei0fh98p4nij/xLpMv8RlCsQZmJPvV8/b1FtR3EuaAjcoEGQG/WOKv40RQg+sBEJeM1InWH8zrl8BTgykfvobiGbgMNNbUtLB0fImLaJhvw7MzAyzaFReh17gg8m/jiJ3pG2wBdVTYjQK02OLA19TIoiG2MVLZnPnMIK8VAXq14Z1njBtC6He83AmLGQfzM9p019nMss29mCNMWZFe4DzgRHeHYIG6g2rRF1I+7dws03F+DOcsUwEOT8ECUHrd4FVWoNNQyxW0ViMVH6LnweBVxrTidY4v8o2F/mZy865nvvQibjeypaljOJE3yGTZtvkDppn3xup0YGfr1HDrohtSQB5gdQcE1l3SJBcc27CFbWZi1YXOnzL2jHFB7SYM47sR9n+jJ5Kg7IZlAj/LrMQZj/IsO2BbE438rtWQm2y77vdmMz2OhEjtciX/bIKkh32yxp+GqWDQBKRZHMPBtpqXPZUXw=
